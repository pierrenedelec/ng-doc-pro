:80, :443 {
	# Enable automatic HTTPS (self-signed in development, Let's Encrypt in production)
	encode gzip

	# Serve the Angular app from dist directory
	root * /app/dist

	# SPA routing - fallback to index.html for unmatched routes
	try_files {path} /index.html

	# File server for static assets
	file_server

	# Security headers
	header / X-Content-Type-Options "nosniff"
	header / X-Frame-Options "SAMEORIGIN"
	header / X-XSS-Protection "1; mode=block"
	header / Referrer-Policy "no-referrer-when-downgrade"

	# Cache static assets
	header /assets Cache-Control "public, max-age=31536000, immutable"
	header /favicon.ico Cache-Control "public, max-age=604800"
	header /index.html Cache-Control "public, max-age=3600, must-revalidate"

	# Disable caching for service workers
	header /*.js Cache-Control "public, max-age=3600"
}
